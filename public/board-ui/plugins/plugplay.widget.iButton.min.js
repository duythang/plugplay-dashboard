!function(){freeboard.loadWidgetPlugin({type_name:"interactive_button",display_name:"Button",description:"Button which can send a value as well as recieve one",settings:[{name:"button_type",display_name:"Button Type",type:"option",description:"Choose a style of Button",options:[{name:"Yellow",value:"yellow"},{name:"Red",value:"red"},{name:"Green",value:"green"}]},{name:"title",display_name:"Title",type:"text",required:!0},{name:"value",display_name:"Value",type:"calculated"},{name:"callback",display_name:"Datasource to publish",type:"calculated"},{name:"on_text",display_name:"On Text",type:"text"},{name:"off_text",display_name:"Off Text",type:"text"}],newInstance:function(t,n){n(new e(t))}}),freeboard.addStyle(".ibutton","border-radius:50%;width:50px;height:50px;border:2px solid #3d3d3d;float:left;margin-top:15px;margin-left:110px;margin-right:10px;background-color:#909090;"),freeboard.addStyle(".ibutton.onYellow","background-color:#FFC773;border-color:#0;"),freeboard.addStyle(".ibutton.onRed","background-color:#F00003;border-color:#0;"),freeboard.addStyle(".ibutton.onGreen","background-color:#00FF00;border-color:#0;"),freeboard.addStyle(".ibutton-text","margin-top:35px;"),freeboard.addStyle(".ibutton.interactive:hover","cursor: pointer;");var e=function(e){function t(){switch(d.button_type){case"yellow":l.toggleClass("onRed",!1),l.toggleClass("onGreen",!1),l.toggleClass("onYellow",s);break;case"red":l.toggleClass("onYellow",!1),l.toggleClass("onGreen",!1),l.toggleClass("onRed",s);break;case"green":l.toggleClass("onRed",!1),l.toggleClass("onYellow",!1),l.toggleClass("onGreen",s)}i.text(s?_.isUndefined(n)?_.isUndefined(d.on_text)?"":d.on_text:n:_.isUndefined(a)?_.isUndefined(d.off_text)?"":d.off_text:a)}var n,a,o=$('<h2 class="section-title"></h2>'),l=$('<div class="ibutton interactive"></div>'),i=$('<div class="ibutton-text"></div>'),d=e,s=!1;this.onClick=function(e){e.preventDefault();var t=!s;this.onCalculatedValueChanged("value",t),t=t?1:0;var n={device:d.title,data0:t,data1:"",data2:""};this.sendValue(d.callback,n)},this.render=function(e){$(e).append(o).append(l).append(i),$(l).click(this.onClick.bind(this))},this.onSettingsChanged=function(e){d=e,o.html(_.isUndefined(e.title)?"":e.title),t()},this.onCalculatedValueChanged=function(e,o){switch(e){case"value":s=o?!0:!1;break;case"on_text":n=o;break;case"off_text":a=o}t()},this.onDispose=function(){},this.getHeight=function(){return 2},this.onSettingsChanged(e)}}();