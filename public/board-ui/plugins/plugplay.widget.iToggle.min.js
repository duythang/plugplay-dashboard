!function(){freeboard.loadWidgetPlugin({type_name:"interactive_toggle",display_name:"Toggle",description:"Toggle which can send a value as well as recieve one",settings:[{name:"title",display_name:"Title",type:"text",required:!0},{name:"value",display_name:"Value",type:"calculated"},{name:"callback",display_name:"Datasource to publish",type:"calculated"},{name:"on_text",display_name:"On Text",type:"text"},{name:"off_text",display_name:"Off Text",type:"text"}],newInstance:function(e,a){a(new t(e))}}),freeboard.addStyle(".itoggle","position:relative;display:inline-block;width:60px;height:34px;float:left;margin-left:90px; margin-right:10px;"),freeboard.addStyle(".itoggle input","display:none;"),freeboard.addStyle(".switch","position: absolute;cursor: pointer;top: 0;left: 0;right: 0;bottom: 0;background-color: #ccc;-webkit-transition: .4s;transition: .4s;"),freeboard.addStyle(".switch:before","position: absolute;content:'';height: 26px;width: 26px;left: 4px;bottom: 4px;background-color: white;webkit-transition: .4s;transition: .4s;"),freeboard.addStyle("input:checked + .switch","background-color: #74d21a;"),freeboard.addStyle("input:focus + .switch","box-shadow: 0 0 1px #74d21a;"),freeboard.addStyle("input:checked + .switch:before","-webkit-transform: translateX(26px);-ms-transform: translateX(26px);transform: translateX(26px);"),freeboard.addStyle(".switch.round","border-radius: 34px;"),freeboard.addStyle(".switch.round:before","border-radius: 50%;"),freeboard.addStyle(".itoggle-text","margin-top:10px;");var e=0,t=function(t){function a(){$("#"+o).prop("checked",c),s.text(c?_.isUndefined(i)?_.isUndefined(r.on_text)?"":r.on_text:i:_.isUndefined(n)?_.isUndefined(r.off_text)?"":r.off_text:n)}var i,n,o="itoggle-"+e++,d=$('<h2 class="section-title"></h2>'),l=$('<label class="itoggle"><input id="'+o+'" type="checkbox"><div class="switch"></div>label>'),s=$('<div class="itoggle-text"></div>'),r=t,c=!1;this.onClick=function(e){e.preventDefault();var t=!c;this.onCalculatedValueChanged("value",t),t=t?1:0;var a={device:r.title,data0:t,data1:"",data2:""};this.sendValue(r.callback,a)},this.render=function(e){$(e).append(d).append(l).append(s),$("#"+o).change(this.onClick.bind(this))},this.onSettingsChanged=function(e){r=e,d.html(_.isUndefined(e.title)?"":e.title),a()},this.onCalculatedValueChanged=function(e,t){switch(e){case"value":c=t;break;case"on_text":i=t;break;case"off_text":n=t}a()},this.onDispose=function(){},this.getHeight=function(){return 1},this.onSettingsChanged(t)}}();